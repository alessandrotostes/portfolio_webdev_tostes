document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("projectModal"),t=(e&&new bootstrap.Modal(e),document.getElementById("modalProjectTitle")),o=document.getElementById("modalProjectDesc"),n=document.getElementById("modalProjectTech"),a=document.getElementById("modalProjectLiveLink"),l=document.getElementById("modalProjectRepoLink"),r=document.getElementById("modalProjectIframe"),c=e?e.querySelector(".iframe-overlay"):null;e&&(e.addEventListener("show.bs.modal",(function(e){const i=e.relatedTarget;if(!i)return;const s=i.getAttribute("data-project-title"),d=i.getAttribute("data-project-desc"),u=i.getAttribute("data-project-tech"),y=i.getAttribute("data-project-live-url"),f=i.getAttribute("data-project-repo-url");if(t&&(t.textContent=s),o&&(o.textContent=d),n&&(n.textContent=u?u.split(",").map((e=>e.trim())).join(", "):"N/A"),a&&(a.href=y&&"#"!==y?y:"#",a.style.display=y&&"#"!==y?"inline-block":"none"),l&&(l.href=f&&"#"!==f?f:"#",l.style.display=f&&"#"!==f?"inline-block":"none"),r&&y&&"#"!==y){r.src="about:blank",c.style.display="flex",r.style.opacity="0",setTimeout((()=>{r.src=y}),100);let e=!1;r.onload=()=>{e=!0;try{r.contentWindow.document;c.style.display="none",r.style.opacity="1"}catch(e){console.warn("Iframe loading likely blocked by cross-origin policy for URL:",y),c.style.display="flex",r.style.opacity="0"}},setTimeout((()=>{e||(console.warn("Iframe onload event did not fire. Assuming blocked for URL:",y),c.style.display="flex",r.style.opacity="0")}),3500)}else r&&(r.src="about:blank",c.style.display="flex",r.style.opacity="0")})),e.addEventListener("hidden.bs.modal",(function(){r&&(r.src="about:blank")}))),document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){const t=this.getAttribute("href");if("#"===t||this.hasAttribute("data-bs-toggle"))return;const o=document.querySelector(t);if(o){e.preventDefault();const n=document.querySelector(".navbar.sticky-top")?.offsetHeight||0,a=o.getBoundingClientRect().top+window.pageYOffset-n-10;window.scrollTo({top:a,behavior:"smooth"}),document.querySelectorAll(".navbar-nav .nav-link").forEach((e=>{e.classList.remove("active"),e.getAttribute("href")===t&&e.classList.add("active")}))}}))}));const i=document.querySelectorAll('.navbar-nav .nav-link[href^="#"]'),s=Array.from(i).map((e=>document.querySelector(e.getAttribute("href")))).filter(Boolean);window.addEventListener("scroll",(()=>{let e="";const t=window.pageYOffset,o=document.querySelector(".navbar.sticky-top")?.offsetHeight||0;s.forEach((n=>{const a=n.offsetTop-o-50;t>=a&&(e="#"+n.id)})),i.forEach((t=>{t.classList.remove("active"),t.getAttribute("href")===e&&t.classList.add("active")})),""===e&&t<s[0]?.offsetTop&&document.querySelector('.navbar-nav .nav-link[href="#sobre"]')?.classList.add("active")}))}));